// proto/driver/v1/driver.proto
syntax = "proto3";
package driver.v1;
import "common/v1/common.proto";
import "google/protobuf/empty.proto";
option go_package = "github.com/lhiradi/ride-handling/proto/driver/v1;driverv1";

message Driver {
  string id = 1;
  string name = 2;
  string phone = 3;
  string vehicle = 4;
  string password_hash = 5;
}

message SetStatusRequest { string driver_id = 1; string status = 2; } // "online" | "offline"

message HeartbeatRequest {
  string driver_id = 1;
  common.v1.GeoPoint location = 2;
  int64 at_unix_sec = 3;
}
message FindNearbyDriversRequest {
  double lat = 1;         // Latitude of rider
  double lon = 2;         // Longitude of rider
  double radius_km = 3;   // Search radius in kilometers
}
message CreateDriverRequest {
  string name = 1;
  string phone = 2;
  string vehicle = 3;
  string password_hash = 4;
}
message CreateDriverResponse { string driver_id = 1; }

message FindNearbyDriversResponse {
  repeated string driver_ids = 1; // List of nearby driver IDs
}

service DriverService {
  rpc CreateDriver(CreateDriverRequest) returns (CreateDriverResponse);
  rpc SetStatus(SetStatusRequest) returns (.google.protobuf.Empty);
  rpc Heartbeat(HeartbeatRequest) returns (.google.protobuf.Empty);
  rpc FindNearbyDrivers(FindNearbyDriversRequest) returns (FindNearbyDriversResponse);

}
